<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>ÂÜ∑ÂÜªÊ¶¥Ëé≤‰∫ßÂìÅ‰ø°ÊÅØ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50 py-8">
  <div class="max-w-xl mx-auto bg-white shadow-xl rounded-2xl p-6">
    <!-- language switch -->
    <div class="flex justify-end space-x-2 mb-4">
      <button onclick="setLang('zh')" class="px-2 py-1 border rounded">üá®üá≥</button>
      <button onclick="setLang('ko')" class="px-2 py-1 border rounded">üá∞üá∑</button>
      <button onclick="setLang('en')" class="px-2 py-1 border rounded">üá∫üá∏</button>
    </div>

    <h2 id="title" class="text-xl font-semibold mb-4 text-center"></h2>

    <!-- product info (custom order) -->
    <table id="productInfo" class="w-full text-sm mb-4">
      <tbody>
        <tr><td class="font-medium w-1/3"></td><td id="productName"></td></tr>
        <tr><td class="font-medium"></td><td id="origin"></td></tr>
        <tr><td class="font-medium"></td><td id="variety"></td></tr>
        <tr><td class="font-medium"></td><td id="harvest"></td></tr>
        <tr><td class="font-medium"></td><td id="mfgDate"></td></tr>
        <tr><td class="font-medium"></td><td id="lotNo"></td></tr>
        <tr><td class="font-medium"></td><td id="freezeMethod"></td></tr>
        <tr><td class="font-medium"></td><td id="shipDate"></td></tr>
        <tr><td class="font-medium"></td><td id="exporter"></td></tr>
        <tr><td class="font-medium"></td><td id="importer"></td></tr>
      </tbody>
    </table>

    <div class="text-center mb-6">
      <a id="calcBtn" href="https://DKCostech.github.io/durian-tools/durian_thawing_calculator_450_V15.html"
         class="px-4 py-2 bg-blue-600 text-white rounded"></a>
    </div>

    <div class="p-4 bg-gray-100 rounded">
      <h3 id="tempTitle" class="font-medium mb-2 text-center"></h3>
      <div class="text-center space-y-1">
        <div><span id="tempLabel"></span> <span id="tempValue">-</span> ‚ÑÉ</div>
        <div><span id="timeLabel"></span> <span id="timeValue">-</span></div>
      </div>
      <div id="errorMessage" class="text-red-600 text-center hidden mt-1"></div>
    </div>

    <div class="mt-6">
      <canvas id="tempChart"></canvas>
    </div>
  </div>

<script>
  // -- product values --
  const productData={
    zh:{productName:"ÂÜ∑ÂÜªÊ¶¥Ëé≤ (Monthong)",origin:"Ë∂äÂçó",variety:"ËÇâÂùó",harvest:"2025Âπ¥8Êúà",mfgDate:"2025-07-18",lotNo:"LOT-DK-230715",freezeMethod:"IQF",shipDate:"2025-08-01",exporter:"DK Costech Co., Ltd.",importer:"‰∏≠ÂõΩËøõÂè£ÂÖ¨Âè∏ÂêçÁß∞"},
    ko:{productName:"ÎÉâÎèô ÎëêÎ¶¨Ïïà (Î™¨ÌÜµ)",origin:"Î≤†Ìä∏ÎÇ®",variety:"Î™∏ÌÜµ",harvest:"2025ÎÖÑ 8Ïõî",mfgDate:"2025-07-18",lotNo:"LOT-DK-230715",freezeMethod:"IQF",shipDate:"2025-08-01",exporter:"DK Costech Co., Ltd.",importer:"(Ï§ëÍµ≠ ÏàòÏûÖÌöåÏÇ¨)"},
    en:{productName:"Frozen Durian (Monthong)",origin:"Vietnam",variety:"Pulp Block",harvest:"Aug 2025",mfgDate:"2025-07-18",lotNo:"LOT-DK-230715",freezeMethod:"IQF",shipDate:"2025-08-01",exporter:"DK Costech Co., Ltd.",importer:"(Chinese Importer)"}
  };

  // -- language strings (X-label changed to Date) --
  const langStrings={
    zh:{title:"ÂÜ∑ÂÜªÊ¶¥Ëé≤‰∫ßÂìÅ‰ø°ÊÅØ",calcBtn:"È¢ÑËÆ°Ëß£ÂÜªÊó∂Èó¥ËÆ°ÁÆó",tempTitle:"ÂÆûÊó∂ËøêËæìÊ∏©Â∫¶",tempLabel:"ÂΩìÂâçÊ∏©Â∫¶:",timeLabel:"ËÆ∞ÂΩïÊó∂Èó¥:",error:"ÊöÇÊó†ËÆæÂ§á‰ø°Âè∑",productName:"‰∫ßÂìÅÂêçÁß∞",origin:"Âéü‰∫ßÂú∞",variety:"ÂìÅÁßç",harvest:"ÈááÊî∂Êó∂Êúü",mfgDate:"Áîü‰∫ßÊó•Êúü",lotNo:"ÊâπÂè∑",freezeMethod:"ÂÜ∑ÂÜªÊñπÂºè",shipDate:"Âá∫Ë¥ßÊó•Êúü",exporter:"Âá∫Âè£ÂïÜ",importer:"ËøõÂè£ÂïÜ",graphXLabel:"Êó•Êúü",graphYLabel:"Ê∏©Â∫¶ (‚ÑÉ)"},
    ko:{title:"ÎÉâÎèô ÎëêÎ¶¨Ïïà Ï†úÌíà Ï†ïÎ≥¥",calcBtn:"ÏòàÏÉÅ Ìï¥ÎèôÏãúÍ∞Ñ Í≥ÑÏÇ∞",tempTitle:"Ïã§ÏãúÍ∞Ñ Ïö¥ÏÜ° Ïò®ÎèÑ",tempLabel:"ÌòÑÏû¨ Ïò®ÎèÑ:",timeLabel:"Í∏∞Î°ù ÏãúÍ∞Ñ:",error:"Ïã†Ìò∏ ÏàòÏã† ÏóÜÏùå",productName:"Ï†úÌíàÎ™Ö",origin:"ÏõêÏÇ∞ÏßÄ",variety:"ÌíàÏ¢Ö",harvest:"ÏàòÌôïÏãúÍ∏∞",mfgDate:"ÏÉùÏÇ∞Ïùº",lotNo:"Lot Î≤àÌò∏",freezeMethod:"ÎÉâÎèôÎ∞©Ïãù",shipDate:"ÏÑ†Ï†ÅÏùº",exporter:"ÏàòÏ∂úÏûê",importer:"ÏàòÏûÖÏûê",graphXLabel:"ÎÇ†Ïßú",graphYLabel:"Ïò®ÎèÑ (‚ÑÉ)"},
    en:{title:"Frozen Durian Product Information",calcBtn:"Thawing Time Calculator",tempTitle:"Real-time Transportation Temperature",tempLabel:"Current Temp:",timeLabel:"Timestamp:",error:"No device signal",productName:"Product Name",origin:"Origin",variety:"Variety",harvest:"Harvest Time",mfgDate:"Production Date",lotNo:"Lot No.",freezeMethod:"Freezing Method",shipDate:"Shipment Date",exporter:"Exporter",importer:"Importer",graphXLabel:"Date",graphYLabel:"Temperature (‚ÑÉ)"}
  };

  let currentLang="zh";
  let tempChart;

  function setLang(lang){
    currentLang=lang;
    renderPage();
    if(tempChart){tempChart.destroy();}
    drawSampleHistoryGraph();
  }

  function renderPage(){
    const t=langStrings[currentLang],d=productData[currentLang];
    document.getElementById("title").innerText=t.title;
    document.getElementById("calcBtn").innerText=t.calcBtn;

    const keys=["productName","origin","variety","harvest","mfgDate","lotNo","freezeMethod","shipDate","exporter","importer"];
    keys.forEach((key,i)=>{
      document.querySelector("#productInfo tr:nth-child("+(i+1)+") td:nth-child(1)").innerText=t[key];
      document.getElementById(key).innerText=d[key];
    });
    document.getElementById("tempTitle").innerText=t.tempTitle;
    document.getElementById("tempLabel").innerText=t.tempLabel;
    document.getElementById("timeLabel").innerText=t.timeLabel;
    document.getElementById("errorMessage").innerText=t.error;
  }

  // dummy realtime
  function fetchRealtimeTemp(){
    document.getElementById("tempValue").innerText="-18.4";
    document.getElementById("timeValue").innerText=new Date().toISOString();
    document.getElementById("errorMessage").classList.add("hidden");
  }

  // sample 7-day graph - fixed y-range
  function drawSampleHistoryGraph(){
    const t=langStrings[currentLang];
    const labels=["2025-08-12","2025-08-13","2025-08-14","2025-08-15","2025-08-16","2025-08-17","2025-08-18"];
    const temps=[-18.4,-18.2,-18.1,-18.3,-18.5,-18.4,-18.3];

    tempChart=new Chart(document.getElementById("tempChart"),{
      type:'line',
      data:{labels:labels,datasets:[{data:temps,fill:false}]},
      options:{
        scales:{
          x:{title:{display:true,text:t.graphXLabel}},
          y:{title:{display:true,text:t.graphYLabel},min:-21,max:-15,ticks:{stepSize:0.5}}
        }
      }
    });
  }

  renderPage();
  fetchRealtimeTemp();
  drawSampleHistoryGraph();
</script>
</body>
</html>
